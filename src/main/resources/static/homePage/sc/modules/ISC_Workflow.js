/*
 * Isomorphic SmartClient
 * Version v12.1p_2021-02-23 (2021-02-23)
 * Copyright(c) 1998 and beyond Isomorphic Software, Inc. All rights reserved.
 * "SmartClient" is a trademark of Isomorphic Software, Inc.
 *
 * licensing@smartclient.com
 *
 * http://smartclient.com/license
 */

if(window.isc&&window.isc.module_Core&&!window.isc.module_Workflow){isc.module_Workflow=1;isc._moduleStart=isc._Workflow_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Workflow load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;isc.defineClass("ProcessElement");isc.A=isc.ProcessElement;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getTitle=function isc_c_ProcessElement_getTitle(){var _1=this.getInstanceProperty("title");if(!_1){_1=this.getClassName();if(_1.endsWith("Task"))_1=_1.substring(0,_1.length-4);_1=isc.DataSource.getAutoTitle(_1)}
return _1});isc.B._maxIndex=isc.C+1;isc.A=isc.ProcessElement.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=true;isc.A.editorType="ProcessElementEditor";isc.B.push(isc.A.getElementDescription=function isc_ProcessElement_getElementDescription(){return this.description||this.ID},isc.A.$195y=function isc_ProcessElement__resolveCriteriaExpressions(_1,_2,_3,_4){_1=isc.clone(_1);if(isc.DS.isAdvancedCriteria(_1)){this.$195z(_1,_2,_3,_4);if(_4.ruleScope){var _5=window[_4.ruleScope];if(!_5||_5.destroyed){this.logWarn("Attempt to resolve ruleScope references in taskInputExpression but ruleScope not found: "+_4.ruleScope)}else{_1=isc.DS.resolveDynamicCriteria(_1,_5.getRuleContext())}}}else{_1=this.$1950(_1,_2,_3,_4)}
return _1},isc.A.$195z=function isc_ProcessElement__resolveAdvancedCriteriaExpressions(_1,_2,_3,_4){var _5=_1.operator;if(_5=="and"||_5=="or"||_5=="not"){var _6=_1.criteria;if(!isc.isAn.Array(_6))_6=[_6];for(var i=0;i<_6.length;i++){this.$195z(_6[i],_2,_3,_4)}}if(_1.value!=null){_1.value=this.$1951(_1.value,_2,_3,_4)}},isc.A.$1950=function isc_ProcessElement__resolveObjectDynamicExpressions(_1,_2,_3,_4){var _5={};for(var _6 in _1){_5[_6]=this.$1951(_1[_6],_2,_3,_4)}
return _5},isc.A.$1951=function isc_ProcessElement__resolveDynamicExpression(_1,_2,_3,_4){if(isc.isA.String(_1)){if(_3&&_1.startsWith("$inputRecord")){if(_3){var _5=_1.replace("$inputRecord","state");_1=isc.Canvas.$70o(_5,null,{state:_3})}}else if(_2&&_1.startsWith("$input")){if(_2){var _5=_1.replace("$input","state");_1=isc.Canvas.$70o(_5,null,{state:_2})}}else if(_4&&_1.startsWith("$last")){_1=_1.substring(5);var _6;if(_1.startsWith("[")){var _7=_1.substring(1,_1.indexOf("]"));_1=_1.substring(_1.indexOf("]")+1);_6=_4.getLastTaskOutput(_7)}else{_6=_4.getLastTaskOutput()}
if(_1.startsWith(".")){var _5="state"+_1;_1=isc.Canvas.$70o(_5,null,{state:_6});if(_1==null){var _8=_5.substring(0,_5.lastIndexOf("."));if(!isc.Canvas.$1683(_8,null,{state:_6})){this.logWarn(this.getClassName()+" taskInputExpression path "+_5+" not found in previous task output")}}}else{_1=_6}}else if(_1.startsWith("$ruleScope")||_1.startsWith("$scope")){if(!_4.ruleScope){this.logWarn("Attempt to reference ruleScope in taskInputExpression but no ruleScope has been defined");_1=null}else{var _9=window[_4.ruleScope];if(!_9||_9.destroyed){this.logWarn("Attempt to reference ruleScope in taskInputExpression but ruleScope not found: "+_4.ruleScope);_1=null}else{var _5=_1.replace("$ruleScope","").replace("$scope","");if(_5.startsWith("."))_5=_5.substring(1);_1=_9.$1671(_5)}}}}else if(isc.isAn.Object(_1)&&_1.text){var _9=window[_4.ruleScope];if(!_9||_9.destroyed){this.logWarn("Attempt to resolve ruleScope references in textFormula but ruleScope not found: "+_4.ruleScope);_1=null}else{if(_1.$176p==null){_1.$176p=isc.SummaryBuilder.generateRuleScopeFunction(_1,_9.getID())}
if(_1.$176p){var _10=_1,_11=_10.text;_1=null;if(_10.summaryVars){var _12=_10.summaryVars;for(var _13 in _12){var _14="#{"+_12[_13]+"}";_11=isc.FormulaBuilder.handleKeyExp(_11,_13,"escaped",_14);_11=isc.FormulaBuilder.handleKeyExp(_11,_13,"braced",_14)}
_10={text:_11}}
var _15=_9.getRuleContext();_1=_10.$176p(_15)}}}
return _1},isc.A.updateGlobalIDReferences=function isc_ProcessElement_updateGlobalIDReferences(_1,_2){return false},isc.A.$2116=function isc_ProcessElement__updateGlobalIDInValueProperty(_1,_2,_3){var _4=false;if(this[_1]){var _5=this[_1],_6=_5.replace("$ruleScope."+_2+".","$ruleScope."+_3+".").replace("$scope."+_2+".","$scope."+_3+".");if(_5!=_6){this[_1]=_6;_4=true}}
return _4},isc.A.$2117=function isc_ProcessElement__updateGlobalIDInValues(_1,_2,_3){var _4=false;if(_1){for(var _5 in _1){var _6=_1[_5],_7=_6.replace("$ruleScope."+_2+".","$ruleScope."+_3+".").replace("$scope."+_2+".","$scope."+_3+".");if(_6!=_7){_1[_5]=_7;_4=true}}}
return _4},isc.A.$2118=function isc_ProcessElement__updateGlobalIDInCriteria(_1,_2,_3){if(!_1)return false;var _4=[{pattern:new RegExp("^\\$ruleScope\\."+_2+"\\."),replacement:"$ruleScope."+_3+"."},{pattern:new RegExp("^\\$scope\\."+_2+"\\."),replacement:"$scope."+_3+"."}];return this.$2119(_1,_4)},isc.A.$2119=function isc_ProcessElement__replaceCriteriaValues(_1,_2){var _3=_1.operator,_4=false;if(_3=="and"||_3=="or"){var _5=_1.criteria;for(var i=0;i<_5.length;i++){if(this.$2119(_5[i],_2)){_4=true}}}else{for(var i=0;i<_2.length;i++){var _7=_2[i];if(_1.value!=null){var _8=_1.value.replace(_7.pattern,_7.replacement);if(_1.value!=_8){_1.value=_8;_4=true}}}}
return _4},isc.A.updateLastElementBindingReferences=function isc_ProcessElement_updateLastElementBindingReferences(_1){return false},isc.A.$214u=function isc_ProcessElement__updateLastElementInValueProperty(_1,_2){var _3=false;if(this[_1]){var _4=this[_1],_5=_4.replace("$last.","$last["+_2+"].");if(_4!=_5){this[_1]=_5;_3=true}}
return _3},isc.A.$214v=function isc_ProcessElement__updateLastElementInValues(_1,_2){var _3=false;if(_1){for(var _4 in _1){var _5=_1[_4],_6=_5.replace("$last.","$last["+_2+"].");if(_5!=_6){_1[_4]=_6;_3=true}}}
return _3},isc.A.$214w=function isc_ProcessElement__updateLastElementInCriteria(_1,_2){if(!_1)return false;var _3=[{pattern:new RegExp("^\\$last\\."),replacement:"$last["+_2+"]."}];var _4=this.$178b(_1,_3);return this.$2119(_1,_3)||_4},isc.A.$178b=function isc_ProcessElement__replaceCriteriaFieldName(_1,_2){var _3=_1.operator,_4=false;if(_3=="and"||_3=="or"){var _5=_1.criteria;for(var i=0;i<_5.length;i++){if(this.$2119(_5[i],_2)){_4=true}}}else{for(var i=0;i<_2.length;i++){var _7=_2[i];if(_1.value!=null){var _8=_1.fieldName.replace(_7.pattern,_7.replacement);if(_1.fieldName!=_8){_1.fieldName=_8;_4=true}}}}
return _4},isc.A.getDynamicValue=function isc_ProcessElement_getDynamicValue(_1,_2){if(_1){var _3=this.$1950({value:_1},null,null,_2);_1=_3.value}
return _1},isc.A.$2143=function isc_ProcessElement__getSummaryFunction(_1,_2,_3){if(this.$176p==null){this.$176p=isc.SummaryBuilder.generateRuleScopeFunction(_1,_2,_3)}
return this.$176p},isc.A.getTextFormulaValue=function isc_ProcessElement_getTextFormulaValue(_1,_2){var _3;if(_1){var _4=_1,_5=_4.text;if(_4.summaryVars){var _6=_4.summaryVars;for(var _7 in _6){var _8="#{"+_6[_7]+"}";_5=isc.FormulaBuilder.handleKeyExp(_5,_7,"escaped",_8);_5=isc.FormulaBuilder.handleKeyExp(_5,_7,"braced",_8)}
_4={text:_5}}
var _9=this.$2143(_4,_2.ruleScope);if(_9){var _10=window[_2.ruleScope];if(!_10||_10.destroyed){this.logWarn("Attempt to resolve ruleScope references in textFormula but ruleScope not found: "+_2.ruleScope)}else{var _11=_10.getRuleContext();_3=_9(_11)}}}
return _3});isc.B._maxIndex=isc.C+18;isc.defineClass("ProcessSequence","ProcessElement");isc.ProcessSequence.addProperties({})
isc.defineClass("Task","ProcessElement");isc.A=isc.Task.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editorType="TaskEditor";isc.B.push(isc.A.$1968=function isc_Task__resolveInputField(_1,_2){if(_1==null)return null;var _3;if(_1.startsWith("$"))_3=this.$1951(_1,null,null,_2);else _3=_2.getStateVariable(_1);return _3},isc.A.$1952=function isc_Task__writeOutputExpression(_1){var _2=this.outputExpression;if(!_2)return;if(_2.startsWith("$")){_2=_2.substring(1);var _3=_2;var _4;var _5=_3.indexOf(".");if(_5>0){_3=_3.substring(0,_5);_4=_3.substring(_5+1)}
var _6=isc.Canvas.getById(_3);if(_6){if(_4){if(!isc.isAn.Array(_1)){if(isc.isA.DynamicForm(_6)){_6.setFieldValue(_4,_1)}else if(isc.isA.ListGrid(_6)&&_6.canEdit){var _7=_6.getEditRow();if(_7!=null){_6.setEditValue(_7,_4,_1)}else{var _8=_6.getSelectedRecords();if(_8!=null&&_8.length==1){var _9=_6.getRecordIndex(_8[0]);_6.setEditValue(_9,_4,_1)}}}else{this.logWarn("outputExpression target is not a supported DBC or is not editable - ignored: "+_2)}}else{this.logWarn("Task output is not supported by outputExpression target - ignored: "+_2)}}else{if(_6.setValues){var _10=(isc.isAn.Array(_1)?_1[0]:_1);if(isc.isAn.Object(_10)){_6.setValues(_10)}else{this.logWarn("task output is not an object and cannot be written with outputExpression - ignored: "+_2)}}else if(_6.setData){if(isc.isAn.Array(_1)||isc.isAn.Object(_1)){if(!isc.isAn.Array(_1))_1=[_1];_6.setData(_1)}else{this.logWarn("task output is not an object and cannot be written with outputExpression - ignored: "+_2)}}else{this.logWarn("outputExpression target is not a supported DBC - ignored: "+_2)}}}else{this.logWarn("outputExpression DBC not found - ignored: "+_2)}}else{this.logWarn("Invalid outputExpression - ignored: "+_2)}},isc.A.updateLastElementBindingReferences=function isc_Task_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214u("inputField",_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_Task_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2116("inputField",_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("Process","Task");isc.A=isc.Process;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$27q={};isc.A.gatewayPlaceholderSelection="[placeholder]";isc.B.push(isc.A.loadProcess=function isc_c_Process_loadProcess(_1,_2){var _3=isc.DataSource.get("WorkflowLoader");_3.fetchData({id:_1},function(_8,_9,_10){var _4=null;var _5=_9.content;if(_5!=null){if(isc.isAn.Array(_5)){_4=isc.Class.evaluate(_5[0]);_4.ID=_1[0];isc.Process.$27q[_1[0]]=_4;for(var i=1;i<_5.length;i++){var p=isc.Class.evaluate(_5[i]);p.ID=_1[i];isc.Process.$27q[_1[i]]=p}}else{_4=isc.Class.evaluate(_5);_4.ID=_1;isc.Process.$27q[_1]=_4}}else{isc.logWarn("File named \""+_1+"\".proc.xml could not be found in the search path specified by \"project.processes\".")}
_2(_4)})},isc.A.getProcess=function isc_c_Process_getProcess(_1){return isc.Process.$27q[_1]});isc.B._maxIndex=isc.C+2;isc.A=isc.Process.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoStart=false;isc.B.push(isc.A.init=function isc_Process_init(){var _1=this.Super("init",arguments);this.instantiateElements();this.$1953=this.startElement;if(this.autoStart)this.start();return _1},isc.A.instantiateElements=function isc_Process_instantiateElements(){if(this.elements)this.elements=this.$1972(this.elements);if(this.sequences)this.sequences=this.$1972(this.sequences)},isc.A.$1972=function isc_Process__instantiateElements(_1){var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];_2[i]=_4;if(isc.isAn.Object(_4)){if(_4._constructor){_2[i]=isc.ClassFactory.newInstance(_4)}
if(_4.elements){_2[i].elements=this.$1972(_4.elements)}}}
return _2},isc.A.getElement=function isc_Process_getElement(_1){return this.$87g(this,_1)},isc.A.$87g=function isc_Process__searchElement(_1,_2){if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];if(s.ID==_2){return s}else if(s.sequences||s.elements){var _5=this.$87g(s,_2);if(_5)return _5}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];if(e.ID==_2){return e}else if(e.sequences||e.elements){var _5=this.$87g(e,_2);if(_5)return _5}}}},isc.A.getAllElements=function isc_Process_getAllElements(_1,_2){if(!_1)_1=this;if(!_2)_2=[];if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];_2.add(s);if(s.sequences||s.elements){this.getAllElements(s,_2)}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];_2.add(e);if(e.sequences||e.elements){this.getAllElements(e,_2)}}}
return _2},isc.A.removeElement=function isc_Process_removeElement(_1){this.$197u(this,_1)},isc.A.$197u=function isc_Process__removeElement(_1,_2){if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];if(s==_2){_1.sequences.removeAt(i);return true}
if(s.sequences||s.elements){if(this.$197u(s,_2))return true}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];if(e==_2){_1.elements.removeAt(i);return true}
if(e.sequences||e.elements){if(this.$197u(e,_2))return true}}}},isc.A.addElement=function isc_Process_addElement(_1,_2,_3){if(_2||_3){this.$1959(this,_1,_2,_3)}else{if(!this.elements)this.elements=[];this.elements.add(_1)}},isc.A.$1959=function isc_Process__addElement(_1,_2,_3,_4){if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];if(_3&&s==_3){var _7=i+1;_1.sequences.add(_2,_7);return true}else if(_4&&s==_4){var _7=i;_1.sequences.add(_2,_7);return true}
if(s.sequences||s.elements){if(this.$1959(s,_2,_3,_4))return true}}}
if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];if(_3&&e==_3){var _7=i+1;_1.elements.add(_2,_7);return true}else if(_4&&e==_4){var _7=i;_1.elements.add(_2,_7);return true}
if(e.sequences||e.elements){if(this.$1959(e,_2,_3,_4))return true}}}},isc.A.setState=function isc_Process_setState(_1){this.state=_1},isc.A.start=function isc_Process_start(){if(this.executionStack==null){if(this.logIsDebugEnabled("workflow")){this.logDebug("Start process: "+this.echo(this),"workflow")}}
if(this.executionStack==null){this.executionStack=[]}
if(this.state==null)this.state={};while(this.$39n()){var _1=this.$87h();if(_1){this.$104r=true;if(!_1.executeElement(this)){return}}}
if(this.finished){delete this.$1953;this.finished(this.state)}
if(this.logIsDebugEnabled("workflow")){this.logDebug("Process finished: "+this.echo(this),"workflow")}},isc.A.reset=function isc_Process_reset(_1){this.state=_1;this.executionStack=null;this.$1953=this.startElement;this.setLastTaskClass(null);this.$1954=null},isc.A.$39n=function isc_Process__next(_1){var _2=this.executionStack.last();if(_2==null){if(this.$1953){var _3=this.$87i(this,this.$1953);if(_3==null){isc.logWarn("unable to find task '"+this.$1953+"' - process will be finished")}
return _3}else if(this.$104r){return null}else if(this.sequences&&this.sequences.length>0){this.executionStack.add({el:this,sIndex:0});return this.sequences[0]}else if(this.elements&&this.elements.length>0){this.executionStack.add({el:this,eIndex:0});return this.elements[0]}else if(!_1){isc.logWarn("There are neither sequences or elements. Nothing to execute.")}}else{var _4=null;if(_2.sIndex!=null){_4=_2.el.sequences[_2.sIndex]}else if(_2.eIndex!=null){_4=_2.el.elements[_2.eIndex]}
this.setLastTaskClass(_4.getClassName());if(_4.nextElement){this.executionStack=[];var _3=this.$87i(this,_4.nextElement);if(_3==null){isc.logWarn("unable to find task '"+_4.nextElement+"' - process will be finished")}
return _3}else{return this.$87j()}}},isc.A.$87i=function isc_Process__gotoElement(_1,_2){var _3={el:_1};this.executionStack.add(_3);if(_1.sequences){for(var i=0;i<_1.sequences.length;i++){var s=_1.sequences[i];_3.sIndex=i;if(s.ID==_2){return s}else if(s.sequences||s.elements){var _6=this.$87i(s,_2);if(_6)return _6}}}
delete _3.sIndex;if(_1.elements){for(var i=0;i<_1.elements.length;i++){var e=_1.elements[i];_3.eIndex=i;if(e.ID==_2){return e}else if(e.sequences||e.elements){var _6=this.$87i(e,_2);if(_6)return _6}}}
this.executionStack.removeAt(this.executionStack.length-1)},isc.A.$87j=function isc_Process__findNextElement(){var _1=this.executionStack.last();if(_1.eIndex!=null&&_1.el!=this){if(_1.eIndex==_1.el.elements.length-1){this.executionStack.removeAt(this.executionStack.length-1);if(_1.el==this){return}else{return this.$87j()}}else{_1.eIndex++;return _1.el.elements[_1.eIndex]}}},isc.A.$87h=function isc_Process__getFirstTask(_1){var _2=this.executionStack.last();var _3=null;if(_2.sIndex!=null){_3=_2.el.sequences[_2.sIndex]}else if(_2.eIndex!=null){_3=_2.el.elements[_2.eIndex]}
if(_3.sequences==null&&_3.elements==null){if(!_1)this.handleTraceElement(_3);return _3}
var _4={el:_3};this.executionStack.add(_4);if(_3.sequences){for(var i=0;i<_3.sequences.length;i++){_4.sIndex=i
var _6=this.$87h(_3.sequences[i]);if(_6){this.handleTraceElement(_6);return _6}}}
if(_3.elements){for(var i=0;i<_3.elements.length;i++){_4.eIndex=i
var _6=this.$87h(_3.elements[i]);if(_6){if(_4.eIndex==0)this.handleTraceElement(_4.el);this.handleTraceElement(_6);return _6}}}
this.executionStack.removeAt(this.executionStack.length-1)},isc.A.setNextElement=function isc_Process_setNextElement(_1){var _2=this.executionStack.last(),_3=null;if(_2.sIndex!=null){_3=_2.el.sequences[_2.sIndex]}else if(_2.eIndex!=null){_3=_2.el.elements[_2.eIndex]}
this.setLastTaskClass(_3.getClassName());this.executionStack=[];this.$1953=_1},isc.A.setStateVariable=function isc_Process_setStateVariable(_1,_2){if(_1.indexOf(".")<0||this.state[_1]){this.state[_1]=_2}else{var _3=_1.split(".");var _4=this.state;for(var i=0;i<_3.length-1;i++){var _6=_4[_3[i]];if(_6==null){_4[_3[i]]={}
_6=_4[_3[i]]}
_4=_6}
_4[_3[i]]=_2}},isc.A.getStateVariable=function isc_Process_getStateVariable(_1){if(_1.indexOf(".")<0||this.state[_1]){return this.state[_1]}else{var _2=_1.split(".");var _3=this.state;for(var i=0;i<_2.length-1;i++){_3=_3[_2[i]];if(_3==null){isc.logWarn("Unable to get state variable: "+_1+" no such path")
return}}
return _3[_2[i]]}},isc.A.setLastTaskClass=function isc_Process_setLastTaskClass(_1){this.$1955=(_1?_1.toLowerCase():null)},isc.A.getLastTaskClass=function isc_Process_getLastTaskClass(){return this.$1955},isc.A.setTaskOutput=function isc_Process_setTaskOutput(_1,_2,_3){if(!this.$1954)this.$1954={};this.$1954[_1.toLowerCase()]=_3;if(_2!=null)this.$1954[_2]=_3},isc.A.getLastTaskOutput=function isc_Process_getLastTaskOutput(_1){if(!this.$1954)return null;var _2=_1;if(!_1)_1=this.getLastTaskClass();if(!_1)return null;_1=_1.toLowerCase();if(_2)_2=_2.toLowerCase();var _3=this.$1954[_1];if(_2!=null&&_3==null&&!_2.endsWith("task")&&!_2.endsWith("gateway")){_1=_2+"task";_3=this.$1954[_1];if(_3==null){_1=_2+"gateway";_3=this.$1954[_1]}}
return _3},isc.A.handleTraceElement=function isc_Process_handleTraceElement(_1){if(isc.isA.Class(_1)&&this.logIsDebugEnabled("workflow")){this.logDebug((this.traceElement?"Trace element: ":"Execute element: ")+this.echo(_1),"workflow")}
if(this.traceElement)this.traceElement(_1,this.traceContext)});isc.B._maxIndex=isc.C+25;isc.Process.registerStringMethods({finished:"state",traceElement:"element,context"});isc.defineClass("ServiceTask","Task");isc.A=isc.ServiceTask;isc.A.requiresDataSources=true;isc.A=isc.ServiceTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.operationType="fetch";isc.A.passThruOutput=false;isc.A.title="DataSource Fetch Data";isc.A.editorType="ServiceTaskEditor";isc.B.push(isc.A.executeElement=function isc_ServiceTask_executeElement(_1){var _2=this.dataSource;if(_2.getClassName==null||_2.getClassName()!="DataSource"){_2=isc.DataSource.get(_2)}
var _3=this.$1956(_1);if(this.operationType=="export"){var _4={exportAs:this.exportFormat,operationId:this.operationId};_2.exportData(_3,_4);return true}
var _5=isc.addProperties({},this.requestProperties,{operationId:this.operationId});_5.willHandleError=true;var _6=this;_2.performDSOperation(this.operationType,_3,function(_18,_19,_20){var _7=_18.results,_8=_20.operation;if(_18.isStructured&&(!_7||_7.status<0||(_7.status==null&&_18.status<0)))
{if(!isc.RPC.runDefaultErrorHandling(_18,_20,_6.errorFormatter)){_6.fail(_1);return}}
var _9=_19;if(isc.isAn.Array(_19)&&_19.length>0){if(this.operationType=="fetch"){var _10=_2.getPrimaryKeyFieldName();if(_2.isAdvancedCriteria(_3)){var _11=_2.getFieldCriterion(_3,_10);if(_11&&_11.operator=="equals"){_9=_19[0]}}else if(_2.defaultTextMatchStyle=="equals"&&_3[_10]!=null){_9=_19[0]}}else if(this.operationType!="custom"){_9=_19[0]}}
_1.setTaskOutput(_6.getClassName(),_6.ID,_9);if(!isc.isAn.Array(_19))_19=[_19];if(_19.length>0){var _12=[];if(_6.outputFieldList){_12.addList(_6.outputFieldList)}
if(_6.outputField)_12.add(_6.outputField);for(var i=0;i<_12.length;i++){var _14=_12[i];if(_14.startsWith("$")){var _15=_19.length==1?_19[0]:_19;_14=_14.substring(1);_1.setStateVariable(_14,_15)}else{var _16=_14;var _17=_16.lastIndexOf(".");if(_17>0){_16=_16.substring(_17+1)}
var _15=_19[0][_16];if(typeof _15!='undefined'){if(_19.length>1){_15=[_15];for(var i=1;i<_19.length;i++){_15.add(_19[i][_16])}}
_1.setStateVariable(_14,_15)}}};_6.$1952(_19)}
_1.start()},_5);return false},isc.A.$1956=function isc_ServiceTask__createRequestData(_1,_2){var _3;var _4={};if(this.inputFieldList){for(var i=0;i<this.inputFieldList.length;i++){var _6=this.inputFieldList[i];var _7=_6.lastIndexOf(".");if(_7>0){_6=_6.substring(_7+1)}
_4[_6]=_1.getStateVariable(this.inputFieldList[i])}}
if(this.inputField){var _6=this.inputField;if(!_2&&_6.startsWith("$")){_3=this.$1968(_6,_1)}
var _7=_6.lastIndexOf(".");if(_7>0){_6=_6.substring(_7+1)}
if(_3==null)_3=_1.getStateVariable(this.inputField);_4[_6]=_3}
var _8=null;if(this.operationType=="fetch"||this.operationType=="export"){if(this.criteria&&!_2){_8=this.$195y(this.criteria,_3,_4,_1)}else if(this.criteria){_8=this.criteria}
if(this.fixedCriteria){if(_8==null&&_4==null){_8=this.fixedCriteria}else{var _9=isc.clone(this.fixedCriteria);if(_4){_9=isc.DataSource.combineCriteria(_4,_9)}
if(_8){_9=isc.DataSource.combineCriteria(_8,_9)}
_8=_9}}}
if(_8==null){_8=(this.inputFieldList==null&&isc.isAn.Object(_3)?_3:_4)}
if(this.operationType!="fetch"&&this.operationType!="export"){if(this.values){_8=this.values;if(!_2){_8=this.$1950(this.values,_3,_4,_1)}}
if(this.fixedValues){for(var _6 in this.fixedValues){_8[_6]=this.fixedValues[_6]}}}
return _8},isc.A.fail=function isc_ServiceTask_fail(_1){if(!this.failureElement){this.logWarn("ServiceTask does not have a failureElement. Process is aborting.")}
_1.setNextElement(this.failureElement)},isc.A.errorFormatter=function isc_ServiceTask_errorFormatter(_1,_2,_3){if(_1=="VALIDATION_ERROR"){var _4=_2.errors,_5=["Server returned validation errors:<BR><UL>"];if(!isc.isAn.Array(_4))_4=[_4];for(var i=0;i<_4.length;i++){var _7=_4[i];for(var _8 in _7){var _9=_7[_8];_5.add("<LI><B>"+_8+":</B> ");if(!isc.isAn.Array(_9))_9=[_9];for(var j=0;j<_9.length;j++){var _11=_9[j];_5.add((j>0?"<BR>":"")+(isc.isAn.Object(_11)?_11.errorMessage:_11))}
_5.add("</LI>")}}
_5.add("</UL>");return _5.join("")}
return null},isc.A.getElementDescription=function isc_ServiceTask_getElementDescription(){if(!this.dataSource)return"";var _1=this.dataSource+" "+this.operationType+(this.operationId?" ("+this.operationId+")":""),_2=this.$1956({getStateVariable:function(_5){return _5}},true);if(this.operationType=="fetch"||this.operationType=="remove"||this.operationType=="export"){if(!isc.DS.isAdvancedCriteria(_2)){_2=isc.DS.convertCriteria(_2,(this.operationType=="remove"?"exact":null))}
var _3=isc.XORGateway.$87n(_2);var _4=isc.DataSource.create({addGlobalId:false,fields:_3});_1+=" where <ul>"+isc.DataSource.getAdvancedCriteriaDescription(_2,_4,null,{prefix:"<li>",suffix:"</li>"})+"</ul>";_4.destroy()}
return _1},isc.A.getOutputSchema=function isc_ServiceTask_getOutputSchema(){var _1=this.dataSource;if(_1&&(_1.getClassName==null||_1.getClassName()!="DataSource")){_1=isc.DataSource.get(_1)}
return _1},isc.A.updateLastElementBindingReferences=function isc_ServiceTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);if(this.criteria&&(this.operationType=="fetch"||this.operationType=="export")){_2=this.$214w(this.criteria,_1)||_2}
if(this.values&&this.operationType!="fetch"&&this.operationType!="export"){_2=this.$214v(this.values,_1)||_2}
return _2},isc.A.updateGlobalIDReferences=function isc_ServiceTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.criteria&&(this.operationType=="fetch"||this.operationType=="export")){_3=this.$2118(this.criteria,_1,_2)||_3}
if(this.values&&this.operationType!="fetch"&&this.operationType!="export"){_3=this.$2117(this.values,_1,_2)||_3}
return _3});isc.B._maxIndex=isc.C+8;isc.defineClass("DSFetchTask","ServiceTask");isc.A=isc.DSFetchTask.getPrototype();isc.A.title="DataSource Fetch";isc.A.classDescription="Retrieve data from a DataSource which match specified criteria";isc.A.editorType="ServiceTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="fetch";isc.defineClass("DSAddTask","ServiceTask");isc.A=isc.DSAddTask.getPrototype();isc.A.title="DataSource Add";isc.A.classDescription="Add a new record";isc.A.editorType="ServiceTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="add";isc.defineClass("DSUpdateTask","ServiceTask");isc.A=isc.DSUpdateTask.getPrototype();isc.A.title="DataSource Update";isc.A.classDescription="Update an existing record";isc.A.editorType="ServiceTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="update";isc.defineClass("DSRemoveTask","ServiceTask");isc.A=isc.DSRemoveTask.getPrototype();isc.A.title="DataSource Remove";isc.A.classDescription="Remove an existing record";isc.A.editorType="ServiceTaskEditor";isc.A.editorProperties={showOperationTypePicker:false};isc.A.operationType="remove";isc.defineClass("ScriptTask","Task");isc.A=isc.ScriptTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=false;isc.A.isAsync=false;isc.B.push(isc.A.getProcess=function isc_ScriptTask_getProcess(){return this.$197f},isc.A.getInputData=function isc_ScriptTask_getInputData(){return this.inputData},isc.A.setOutputData=function isc_ScriptTask_setOutputData(_1){this.$87l(this.$197f,null,_1)},isc.A.getInputRecord=function isc_ScriptTask_getInputRecord(){return this.inputRecord},isc.A.setOutputRecord=function isc_ScriptTask_setOutputRecord(_1){this.$87l(this.$197f,_1)},isc.A.executeElement=function isc_ScriptTask_executeElement(_1){var _2;var _3={};if(this.inputFieldList){for(var i=0;i<this.inputFieldList.length;i++){var _5=this.inputFieldList[i];var _6=_5.lastIndexOf(".");if(_6>0){_5=_5.substring(_6+1)}
_3[_5]=isc.clone(_1.getStateVariable(this.inputFieldList[i]))}}
if(this.inputField){var _5=this.inputField;if(_5.startsWith("$")){_2=isc.clone(this.$1968(_5,_1))}
var _6=_5.lastIndexOf(".");if(_6>0){_5=_5.substring(_6+1)}
if(_2==null)_2=isc.clone(_1.getStateVariable(this.inputField));_3[_5]=_2}
this.inputData=_2;this.inputRecord=_3;this.$197f=_1;try{var _7=this.execute(_2,_3)}catch(e){isc.logWarn("Error while executing ScriptTask: "+e.toString())}
if(this.isAsync){return false}
if(typeof _7=='undefined'){return true}
this.$87m(_1,_7);return true},isc.A.$87m=function isc_ScriptTask__processTaskOutput(_1,_2){_1.setTaskOutput(this.getClassName(),this.ID,_2);if(this.outputFieldList){for(var i=0;i<this.outputFieldList.length;i++){var _4=this.outputFieldList[i];var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
var _6=_2[_4];if(typeof _6!='undefined'){_1.setStateVariable(this.outputFieldList[i],_6)}}}
if(this.outputField){if(this.outputFieldList==null){if(typeof _2!='undefined'){_1.setStateVariable(this.outputField,_2)}}else{var _4=this.outputField;var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
var _6=_2[_4];if(typeof _6!='undefined'){_1.setStateVariable(this.outputField,_6)}}}
this.$1952(_2)},isc.A.$87l=function isc_ScriptTask__finishTask(_1,_2,_3){if(_2==null){this.$87m(_1,_3)}else{if(_3){var _4=this.outputField;var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
_2[_4]=_3}
this.$87m(_1,_2)}
if(this.isAsync){_1.start()}},isc.A.getCustomDefaults=function isc_ScriptTask_getCustomDefaults(){return{execute:isc.Func.getBody(this.execute)}});isc.B._maxIndex=isc.C+9;isc.ScriptTask.registerStringMethods({execute:"input,inputRecord"});isc.defineClass("XORGateway","ProcessElement");isc.A=isc.XORGateway;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$90p=function isc_c_XORGateway__processFieldsRecursivelyValuesOnly(_1){var _2=[];if(_1.fieldName){if(!_2.contains(_1.fieldName)){_2.add(_1.fieldName)}}else if(_1.criteria){for(var i=0;i<_1.criteria.length;i++){var _4=this.$90p(_1.criteria[i]);for(var j=0;j<_4.length;j++){if(!_2.contains(_4[j])){_2.add(_4[j])}}}}else{for(var _6 in _1){if(!_2.contains(_6)){_2.add(_6)}}}
return _2},isc.A.$87n=function isc_c_XORGateway__processFieldsRecursively(_1){var _2=[];var _3=isc.XORGateway.$90p(_1);for(var i=0;i<_3.length;i++){var _5=_3[i],_6=_5.split("."),_7=isc.DS.getAutoTitle(_6[_6.length-1]);_2.add({name:_5,title:_7})}
return _2});isc.B._maxIndex=isc.C+2;isc.A=isc.XORGateway.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title="Single Decision";isc.A.classDescription="Choose the next task based on criteria";isc.A.editorType="XORGatewayEditor";isc.B.push(isc.A.executeElement=function isc_XORGateway_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.criteria;if(_2){_2=this.$195y(_2,_1.state,_1.state,_1)}
var _3=[_1.state];if(_1.ruleScope){var _4=window[_1.ruleScope];if(_4&&!_4.destroyed){_3.add(_4.getRuleContext())}}
if(_2&&isc.DS.applyFilter(_3,_2).length==1){if(this.nextElement)_1.setNextElement(this.nextElement)}else{if(!this.failureElement){this.logWarn("XOR Gateway does not have a failureElement. Process is aborting.")}
_1.setNextElement(this.failureElement)}
return true},isc.A.getElementDescription=function isc_XORGateway_getElementDescription(){var _1="No criteria - always fail";if(this.criteria){var _2=isc.XORGateway.$87n(this.criteria);var _3=isc.DataSource.create({addGlobalId:false,fields:_2});_1="when <ul>"+isc.DataSource.getAdvancedCriteriaDescription(this.criteria,_3,null,{prefix:"<li>",suffix:"</li>"})+"</ul>";_3.destroy()}
return _1},isc.A.getPlaceholders=function isc_XORGateway_getPlaceholders(){return(this.failureElement==isc.Process.gatewayPlaceholderSelection?["failureElement"]:null)},isc.A.setPlaceholderId=function isc_XORGateway_setPlaceholderId(_1,_2){if(_1=="failureElement")this.failureElement=_2},isc.A.updateLastElementBindingReferences=function isc_XORGateway_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214w(this.criteria,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_XORGateway_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2118(this.criteria,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+6;isc.defineClass("UserConfirmationGateway","ProcessElement");isc.A=isc.UserConfirmationGateway.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title="Confirm with user";isc.A.classDescription="Choose the next task based on user confirmation";isc.A.editorType="UserConfirmationGatewayEditor";isc.B.push(isc.A.executeElement=function isc_UserConfirmationGateway_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);var _3=this;isc.confirm(_2,function(_4){if(_4){if(_3.nextElement)_1.setNextElement(_3.nextElement)}else{if(!_3.failureElement){_3.logWarn("User Confirmation Gateway does not have a failureElement. Process is aborting.")}
_1.setNextElement(_3.failureElement)}
_1.start()});return false},isc.A.getElementDescription=function isc_UserConfirmationGateway_getElementDescription(){var _1="Confirm with user";return _1},isc.A.getPlaceholders=function isc_UserConfirmationGateway_getPlaceholders(){return(this.failureElement==isc.Process.gatewayPlaceholderSelection?["failureElement"]:null)},isc.A.setPlaceholderId=function isc_UserConfirmationGateway_setPlaceholderId(_1,_2){if(_1=="failureElement")this.failureElement=_2});isc.B._maxIndex=isc.C+4;isc.defineClass("DecisionGateway","ProcessElement");isc.A=isc.DecisionGateway.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1957=false;isc.A.title="Multi Decision";isc.A.classDescription="Choose multiple possible next tasks based on criteria";isc.A.editorType="DecisionGatewayEditor";isc.B.push(isc.A.executeElement=function isc_DecisionGateway_executeElement(_1){this.$197v();if(!this.decisionList)this.decisionList=[];_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());for(var i=0;i<this.decisionList.length;i++){var _3=this.decisionList[i],_4=_3.criteria;if(_4){_4=this.$195y(_4,_1.state,_1.state,_1)}
var _5=isc.XORGateway.$87n(_4);var _6=isc.DataSource.create({fields:_5});var _7=[_1.state];if(_1.ruleScope){var _8=window[_1.ruleScope];if(_8&&!_8.destroyed){_7.add(_8.getRuleContext())}}
if(_6.applyFilter(_7,_4).length==1){_1.setNextElement(_3.targetTask);return true}}
if(this.defaultElement)_1.setNextElement(this.defaultElement);return true},isc.A.$197v=function isc_DecisionGateway__convertCriteriaMap(){if(!this.decisionList&&this.criteriaMap){var _1=[];for(var _2 in this.criteriaMap){_1.add({criteria:this.criteriaMap[_2],targetTask:_2})}
this.decisionList=_1}},isc.A.getElementDescription=function isc_DecisionGateway_getElementDescription(){this.$197v();var _1="Multi-branch";if((!this.decisionList||this.decisionList.length==0)&&this.defaultElement){_1="Go to "+this.defaultElement}
return _1},isc.A.dropElementReferences=function isc_DecisionGateway_dropElementReferences(_1){this.$197v();if(this.decisionList){var _2=[];for(var i=0;i<this.decisionList.length;i++){var _4=this.decisionList[i];if(_4.targetTask==_1)_2.add(_4)}
if(_2.length>0)this.decisionList.removeList(_2)}
if(this.defaultElement==_1)this.defaultElement=null},isc.A.updateElementReferences=function isc_DecisionGateway_updateElementReferences(_1,_2){this.$197v();if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _4=this.decisionList[i];if(_4.targetTask==_1)_4.targetTask=_2}}
if(this.defaultElement==_1)this.defaultElement=_2},isc.A.getPlaceholders=function isc_DecisionGateway_getPlaceholders(){this.$197v();var _1=[];if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _3=this.decisionList[i];if(_3.targetTask==isc.Process.gatewayPlaceholderSelection){_1.add(""+i)}}}
if(this.defaultElement==isc.Process.gatewayPlaceholderSelection){_1.add("defaultElement")}
return _1},isc.A.setPlaceholderId=function isc_DecisionGateway_setPlaceholderId(_1,_2){if(_1=="defaultElement"){this.defaultElement=_2}else{var _3=parseInt(_1);this.decisionList[_3].targetTask=_2}},isc.A.updateLastElementBindingReferences=function isc_DecisionGateway_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _4=this.decisionList[i],_5=_4.criteria;_2=this.$214w(this.criteria,_1)||_2}}
return _2},isc.A.updateGlobalIDReferences=function isc_DecisionGateway_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.decisionList){for(var i=0;i<this.decisionList.length;i++){var _5=this.decisionList[i],_6=_5.criteria;_3=this.$2118(_6,_1,_2)||_3}}
return _3});isc.B._maxIndex=isc.C+9;isc.defineClass("UserTask","Task");isc.A=isc.UserTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=false;isc.A.editorType="UserTaskEditor";isc.B.push(isc.A.goToPrevious=function isc_UserTask_goToPrevious(){if(this.previousElement==null){isc.logWarn("PreviousElement is not set - unable to accomplish goToPrevious method.");return}
this.$197f.setNextElement(this.previousElement);this.completeEditing()},isc.A.cancelEditing=function isc_UserTask_cancelEditing(){if(this.$197f){if(this.wizard||this.$197f.wizard){if(this.targetFormValue){this.targetFormValue.hide()}}
var _1=this.$197f
delete this.$197f;_1.setNextElement(this.cancelElement);_1.start()}},isc.A.completeEditing=function isc_UserTask_completeEditing(){if(this.$197f){var _1=this.$197f;delete this.$197f;if(this.wizard||_1.wizard){if(this.targetFormValue){this.targetFormValue.hide()}}
var _2;if(this.targetVMValue){_2=this.targetVMValue.getValues()}else if(this.targetFormValue){_2=this.targetFormValue.getValues()}
_1.setTaskOutput(this.getClassName(),this.ID,_2);if(this.outputField){_1.setStateVariable(this.outputField,_2)}else if(this.outputFieldList){for(var i=0;i<this.outputFieldList.length;i++){var _4=this.outputFieldList[i];var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
var _6=_2[_4];if(typeof _6!='undefined'){_1.setStateVariable(this.outputFieldList[i],_6)}}}else{_1.setStateVariable(this.inputField,_2)}
this.$1952(_2);_1.start()}},isc.A.executeElement=function isc_UserTask_executeElement(_1){this.$197f=_1;if(this.targetView&&isc.isA.String(this.targetView)){if(_1.getStateVariable(this.targetView)){this.targetViewValue=_1.getStateVariable(this.targetView)}else{this.targetViewValue=window[this.targetView];if(this.targetViewValue==null&&_1.views){for(var i=0;i<_1.views.length;i++){if(_1.views[i].ID==this.targetView){this.targetViewValue=isc[_1.views[i]._constructor].create(_1.views[i]);if(this.$197f.containerId){window[this.$197f.containerId].addMember(this.targetViewValue)}
break}}}
if(this.targetViewValue==null){this.targetViewValue=this.addAutoChild(this.targetView)}
if(this.targetViewValue==null){isc.logWarn("TargetView "+this.targetView+" was not found.")}}}else{if(this.targetView){this.targetViewValue=this.targetView}else if(this.inlineView){this.targetViewValue=isc[this.inlineView._constructor].create(this.inlineView);if(this.$197f.containerId){window[this.$197f.containerId].addMember(this.targetViewValue)}}}
if(this.targetVM&&isc.isA.String(this.targetVM)){if(_1.state[this.targetVM]){this.targetVMValue=_1.getStateVariable(this.targetVM)}else{this.targetVMValue=window[this.targetVM];if(this.targetVMValue==null){isc.logWarn("TargetVM "+this.targetVM+" was not found.")}}}else{this.targetVMValue=this.targetVM}
if(this.targetForm&&isc.isA.String(this.targetForm)){if(_1.state[this.targetForm]){this.targetFormValue=_1.getStateVariable(this.targetForm)}else{this.targetFormValue=window[this.targetForm];if(this.targetFormValue==null){isc.logWarn("TargetForm "+this.targetForm+" was not found.")}}}else{this.targetFormValue=this.targetForm}
if(this.targetViewValue==null){isc.logWarn("TargetView or inlineView should be set for UserTask");return true}
if(this.targetFormValue==null&&isc.isA.DynamicForm(this.targetViewValue)){this.targetFormValue=this.targetViewValue}
if(this.targetFormValue==null&&this.targetVMValue==null){isc.logWarn("Either targetForm or targetVM should be set for UserTask or targetView should be a DynamicForm");return true}
this.targetViewValue.showRecursively();var _3=null;if(this.inputField){if(this.inputField.startsWith("$")){_3=isc.clone(this.$1968(this.inputField,_1))}else{_3=isc.clone(_1.getStateVariable(this.inputField))}}else if(this.inputFieldList){_3={};for(var i=0;i<this.inputFieldList.length;i++){var _4=this.inputFieldList[i];var _5=_4.lastIndexOf(".");if(_5>0){_4=_4.substring(_5+1)}
_3[_4]=isc.clone(_1.getStateVariable(this.inputFieldList[i]))}}
if(this.targetVMValue){if(_3)this.targetVMValue.setValues(_3);this.targetVMValue.userTask=this}
if(this.targetFormValue){if(_3)this.targetFormValue.setValues(_3);this.targetFormValue.saveToServer=(this.saveToServer==true);this.targetFormValue.userTask=this}
return false},isc.A.getElementDescription=function isc_UserTask_getElementDescription(){var _1={type:"[nothing]"};if(this.targetView){_1={type:"targetView",ID:(isc.isA.String(this.targetView)?this.targetView:null)}}else if(this.inlineView){_1={type:"inlineView"}}
return"Show "+(_1.ID?"'"+_1.ID+"' ":"")+_1.type+" and wait for input"});isc.B._maxIndex=isc.C+5;isc.defineClass("StateTask","Task");isc.A=isc.StateTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.passThruOutput=false;isc.A.editorType="StateTaskEditor";isc.B.push(isc.A.executeElement=function isc_StateTask_executeElement(_1){if(this.value==null&&this.inputField==null&&this.inputFieldList==null){isc.logWarn("StateTask: value, inputField or inputFieldList should be set.");return true}
if(this.value==null&&this.inputField==null){if(this.outputFieldList==null||this.outputFieldList.length!=this.inputFieldList.length){isc.logWarn("StateTask: outputFieldList should have same number of parameters as inputFieldList.");return}
if(this.type){isc.logWarn("StateTask: type cannot be used with multiple outputFields")}
for(var i=0;i<this.inputFieldList.lenght;i++){var _3=_1.getStateVariable(this.inputFieldList[i]);_1.setStateVariable(this.outputFieldList[i],_3)}
return true}
var _3=this.value||this.$1968(this.inputField,_1);_3=this.$104s(_3,this.type,_1);_1.setStateVariable(this.outputField,_3);_1.setTaskOutput(this.getClassName(),this.ID,_3);return true},isc.A.$104s=function isc_StateTask__executePair(_1,_2,_3){if(_1==null){isc.logWarn("StateTask: value is null. Unable to convert to "+_2);this.fail(_3);return null}
if("string"==_2){return _1.toString()}else if("boolean"==_2){if("true"==_1)return true;if("false"==_1)return false;if(isc.isA.String(_1))return _1.length!=0;if(isc.isA.Number(_1))return _1!=0;return _1!=null}else if("decimal"==_2){var v=parseFloat(_1.toString());if(isNaN(v)){this.fail(_3);return null}
return v}else if("integer"==_2){var v=parseInt(_1.toString());if(isNaN(v)){this.fail(_3);return null}
return v}else if("record"==_2){if(isc.isAn.Object(_1)&&!isc.isAn.Array(_1)&&!isc.isAn.RegularExpression(_1)&&!isc.isAn.Date(_1))
{return _1}
return null}else if("array"==_2){if(isc.isAn.Array(_1))return _1;return[_1]}else{return _1}},isc.A.fail=function isc_StateTask_fail(_1){if(this.failureElement==null){isc.logWarn("There is no failureElement in stateTask")}else{_1.setNextElement(this.failureElement)}},isc.A.getElementDescription=function isc_StateTask_getElementDescription(){var _1="no-op";if(this.value!=null){_1="Set "+this.outputField+"="+this.value}else if(this.type!=null){_1="Set "+this.outputField+"="+this.inputField+" as "+this.type}else if(this.inputField||this.inputFieldList){_1="Copy "+(this.inputField?this.inputField:this.inputFieldList.join(","))+" to "+(this.outputField?this.outputField:this.outputFieldList.join(","))}
return _1});isc.B._maxIndex=isc.C+4;isc.defineClass("StartProcessTask","ScriptTask");isc.A=isc.StartProcessTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.isAsync=true;isc.B.push(isc.A.execute=function isc_StartProcessTask_execute(_1,_2){if(!this.process){this.logWarn("StartProcessTask with no process. Skipped");return}
var _3=this.process,_4=_3.finished,_5=this;_3.finished=function(_6){if(_4)_4(_6);_5.setOutputRecord(_6)}
this.isAsync=true;_3.setState(_2);_3.start()});isc.B._maxIndex=isc.C+1;isc.defineClass("EndProcessTask","ProcessElement");isc.A=isc.EndProcessTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editorPlaceholder=true;isc.B.push(isc.A.executeElement=function isc_EndProcessTask_executeElement(_1){});isc.B._maxIndex=isc.C+1;isc.defineClass("ShowMessageTask","ProcessElement");isc.A=isc.ShowMessageTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Show a message in a modal dialog";isc.A.editorType="ShowMessageTaskEditor";isc.A.type="normal";isc.A.$207j={"normal":"","warning":"warning","error":"error"};isc.B.push(isc.A.executeElement=function isc_ShowMessageTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.type,_3=function(){_1.start()};var _4=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);if(_2=="normal"){isc.say(_4,_3)}else if(_2=="warning"){isc.warn(_4,_3)}else if(_2=="error"){isc.Dialog.create({message:_4,icon:isc.Dialog.getInstanceProperty("errorIcon"),buttons:[isc.Button.create({title:"OK"})],buttonClick:function(_5,_6){_3()}})}else{return true}
return false},isc.A.getElementDescription=function isc_ShowMessageTask_getElementDescription(){var _1=this.message||"",_2=_1.split(" "),_3=_2.getRange(0,3).join(" "),_4=this.type||"message";if(_3.length>25)_3=_3.substring(0,25);if(_3!=_1)_3+=" ...";return"Show "+this.$207j[_4]+" message:<br>"+_3});isc.B._maxIndex=isc.C+2;isc.defineClass("AskForValueTask","UserConfirmationGateway");isc.A=isc.AskForValueTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title="Ask for Value";isc.A.classDescription="Ask the user to input a value";isc.A.editorType="AskForValueTaskEditor";isc.B.push(isc.A.executeElement=function isc_AskForValueTask_executeElement(_1){var _2=(this.defaultValue?{defaultValue:this.defaultValue}:null);var _3=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);var _4=this;isc.askForValue(_3,function(_5){if(_5){_1.setTaskOutput(_4.getClassName(),_4.ID,_5);if(_4.nextElement)_1.setNextElement(_4.nextElement)}else{if(!_4.failureElement){_4.logWarn("Ask For Value Task does not have a failureElement. Process is aborting.")}
_1.setNextElement(_4.failureElement)}
_1.start()},_2);return false},isc.A.getElementDescription=function isc_AskForValueTask_getElementDescription(){var _1="Ask user for a value";return _1});isc.B._maxIndex=isc.C+2;isc.defineClass("ShowNotificationTask","ProcessElement");isc.A=isc.ShowNotificationTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Show a message which fades out automatically";isc.A.editorType="ShowNotificationTaskEditor";isc.A.autoDismiss=true;isc.A.position="T";isc.A.notifyType="message";isc.A.$207k={"message":"","warn":"warning","error":"error"};isc.B.push(isc.A.executeElement=function isc_ShowNotificationTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.notifyType,_3={position:this.position};if(!this.autoDismiss){_3.duration=0;_3.canDismiss=true}
var _4=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.message,_1);isc.Notify.addMessage(_4,null,_2,_3);return true},isc.A.getElementDescription=function isc_ShowNotificationTask_getElementDescription(){var _1=this.message||"",_2=_1.split(" "),_3=_2.getRange(0,3).join(" "),_4=this.notifyType||"message";if(_3.length>25)_3=_3.substring(0,25);if(_3!=_1)_3+=" ...";return"Show "+this.$207k[_4]+" notification:<br>"+_3});isc.B._maxIndex=isc.C+2;isc.defineClass("StartTransactionTask","ProcessElement");isc.A=isc.StartTransactionTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Starts queuing all DataSource operations so they can be sent to the server all together as a transaction";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_StartTransactionTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());isc.RPC.startQueue();return true},isc.A.getElementDescription=function isc_StartTransactionTask_getElementDescription(){return"Start queuing"});isc.B._maxIndex=isc.C+2;isc.defineClass("SendTransactionTask","ProcessElement");isc.A=isc.SendTransactionTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Sends any currently queued DataSource operations as a single transactional request to the server";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_SendTransactionTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());isc.RPC.sendQueue();return true},isc.A.getElementDescription=function isc_SendTransactionTask_getElementDescription(){return"Send queue"});isc.B._maxIndex=isc.C+2;isc.defineClass("ComponentTask","ProcessElement");isc.A=isc.ComponentTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isApplicableComponent=function isc_c_ComponentTask_isApplicableComponent(_1){var _2=(_1.getClass?_1.getClass():null);if(!_2)return false;var _3=this.getInstanceProperty("componentBaseClass"),_4=this.getInstanceProperty("componentRequiresDataSource")||false;_3=(isc.isAn.Array(_3)?_3:[_3]);for(var i=0;i<_3.length;i++){if(_2.isA(_3[i])&&(!_4||_1.dataSource)){return true}}
return false});isc.B._maxIndex=isc.C+1;isc.A=isc.ComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getComponentBaseClasses=function isc_ComponentTask_getComponentBaseClasses(){return(isc.isAn.Array(this.componentBaseClass)?this.componentBaseClass:[this.componentBaseClass])},isc.A.getTargetComponent=function isc_ComponentTask_getTargetComponent(_1){if(!this.componentId){this.logWarn("ComponentTask with no componentId. Task skipped");return null}
if(isc.isA.Class(this.componentId))return this.componentId;var _2=window[this.componentId];if(!_2){if(_1&&_1.screenComponent){_2=_1.screenComponent.getByLocalId(this.componentId)}
if(!_2){this.logWarn("Component not found for ID "+this.componentId+" not found. Task skipped");return null}}
var _3=this.getComponentBaseClasses();for(var i=0;i<_3.length;i++){if(_2.isA(_3[i]))return _2}
this.logWarn("Component type '"+_2.getClassName()+"' is not supported for "+this.getClassName()+". Task skipped");return null},isc.A.getLocalComponent=function isc_ComponentTask_getLocalComponent(_1,_2){if(!_2)return null;if(isc.isA.Class(_2))return _2;var _3=window[_2];if(!_3){if(_1&&_1.screenComponent){_3=_1.screenComponent.getByLocalId(_2)}
if(!_3)return null}
return _3},isc.A.updateGlobalIDReferences=function isc_ComponentTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.componentId&&this.componentId==_1){this.componentId=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("SetLabelTextTask","ComponentTask");isc.A=isc.SetLabelTextTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Label";isc.A.classDescription="Sets the text of a label";isc.A.editorType="SetLabelTextTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetLabelTextTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.value,_1);_2.setContents(_3);return true},isc.A.getElementDescription=function isc_SetLabelTextTask_getElementDescription(){var _1="Set '"+this.componentId+"' text";return _1});isc.B._maxIndex=isc.C+2;isc.defineClass("SetButtonTitleTask","ComponentTask");isc.A=isc.SetButtonTitleTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Button","Window"];isc.A.classDescription="Sets the title of a button or window";isc.A.editorType="SetButtonTitleTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetButtonTitleTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.title,_1);_2.setTitle(_3);return true},isc.A.getElementDescription=function isc_SetButtonTitleTask_getElementDescription(){var _1="Set '"+this.componentId+"' title";return _1});isc.B._maxIndex=isc.C+2;isc.defineClass("ShowComponentTask","ComponentTask");isc.A=isc.ShowComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Canvas";isc.A.title="Show";isc.A.classDescription="Show a currently hidden component";isc.A.editorType="ShowComponentTaskEditor";isc.B.push(isc.A.executeElement=function isc_ShowComponentTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;_2.show();return true},isc.A.getElementDescription=function isc_ShowComponentTask_getElementDescription(){return"Show "+this.componentId});isc.B._maxIndex=isc.C+2;isc.defineClass("HideComponentTask","ComponentTask");isc.A=isc.HideComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Canvas";isc.A.title="Hide";isc.A.classDescription="Hide a component";isc.A.editorType="HideComponentTaskEditor";isc.B.push(isc.A.executeElement=function isc_HideComponentTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;_2.hide();return true},isc.A.getElementDescription=function isc_HideComponentTask_getElementDescription(){return"Hide "+this.componentId});isc.B._maxIndex=isc.C+2;isc.defineClass("FormSetValuesTask","ComponentTask");isc.A=isc.FormSetValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Set form values";isc.A.editorType="FormSetValuesTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormSetValuesTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());this.process=_1;var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=null;if(this.values){_3=this.$1950(this.values,null,null,_1)}
if(this.fixedValues){for(var _4 in this.fixedValues){_3[_4]=this.fixedValues[_4]}}
_2.setValues(_3);return true},isc.A.getElementDescription=function isc_FormSetValuesTask_getElementDescription(){return"Set '"+this.componentId+"' values"},isc.A.getOutputSchema=function isc_FormSetValuesTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;return _1.getDataSource()},isc.A.updateLastElementBindingReferences=function isc_FormSetValuesTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214v(this.values,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_FormSetValuesTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2117(this.values,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+5;isc.defineClass("FormSetFieldValueTask","ComponentTask");isc.A=isc.FormSetFieldValueTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Put a value into just one field of a form";isc.A.editorType="FormSetFieldValueTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormSetFieldValueTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.value;if(_3){var _4=this.$1950({value:_3},null,null,_1);_3=_4.value}
_2.setValue(this.targetField,_3);return true},isc.A.getElementDescription=function isc_FormSetFieldValueTask_getElementDescription(){return"Set '"+this.componentId+"."+this.targetField+"' value"},isc.A.updateLastElementBindingReferences=function isc_FormSetFieldValueTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214u("value",_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_FormSetFieldValueTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2116("value",_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("FormClearValuesTask","ComponentTask");isc.A=isc.FormClearValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Clear form values and errors";isc.A.editorType="FormClearValuesTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormClearValuesTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;_2.clearValues();return true},isc.A.getElementDescription=function isc_FormClearValuesTask_getElementDescription(){return"Clear '"+this.componentId+"' values"});isc.B._maxIndex=isc.C+2;isc.defineClass("FormResetValuesTask","ComponentTask");isc.A=isc.FormResetValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Reset values in a form to defaults";isc.A.editorType="FormResetValuesTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormResetValuesTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;_2.resetValues();return true},isc.A.getElementDescription=function isc_FormResetValuesTask_getElementDescription(){return"Reset '"+this.componentId+"' values"});isc.B._maxIndex=isc.C+2;isc.defineClass("FormValidateValuesTask","ComponentTask");isc.A=isc.FormValidateValuesTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Validate a form and show errors to user";isc.A.editorType="FormValidateValuesTaskEditor";isc.A.passThruOutput=false;isc.B.push(isc.A.executeElement=function isc_FormValidateValuesTask_executeElement(_1){var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=_2.getDataSource(),_4;if(_3){var _5=this;_4=_2.validateData(function(_6){_1.setTaskOutput(_5.getClassName(),_5.ID,_5.createOutput(_6));_1.start()})}else{_4=_2.validate()}
if(_4==false||!_3){var _6={status:(_4==false?isc.RPCResponse.STATUS_VALIDATION_ERROR:isc.RPCResponse.STATUS_SUCCESS),errors:_2.getErrors()};_1.setTaskOutput(this.getClassName(),this.ID,this.createOutput(_6))}else{}
return(_4==false)},isc.A.createOutput=function isc_FormValidateValuesTask_createOutput(_1){var _2={valuesValid:true};if(_1.status==isc.RPCResponse.STATUS_VALIDATION_ERROR){_2.valuesValid=false;_2.errors=isc.DS.getSimpleErrors(_1)}
return _2},isc.A.getOutputSchema=function isc_FormValidateValuesTask_getOutputSchema(){if(!this.$214x){var _1=this.getTargetComponent(this.process);if(_1){var _2=[{name:"$214y",title:"[meta] valuesValid",type:"boolean",criteriaPath:"valuesValid"}];var _3=_1.getDataSource();if(_3){var _4=_3.getFieldNames();for(var i=0;i<_4.length;i++){var _6=_4[i],_7={name:_6,type:"text",multiple:true};_2.add(_7)}}
this.$214x=isc.DS.create({addGlobalId:false,clientOnly:true,criteriaBasePath:"errors",fields:_2})}}
return this.$214x},isc.A.destroy=function isc_FormValidateValuesTask_destroy(){if(this.$214x)this.$214x.destroy();this.Super("destroy",arguments)},isc.A.getElementDescription=function isc_FormValidateValuesTask_getElementDescription(){return"Validate '"+this.componentId+"' values"});isc.B._maxIndex=isc.C+5;isc.defineClass("FormSaveDataTask","ComponentTask");isc.A=isc.FormSaveDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Save changes made in a form (validates first)";isc.A.editorType="FormSaveDataTaskEditor";isc.A.passThruOutput=false;isc.B.push(isc.A.executeElement=function isc_FormSaveDataTask_executeElement(_1){var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=isc.addProperties({},this.requestProperties,{willHandleError:true});var _4=this;_2.saveData(function(_6,_7,_8){_6=_6||{};var _5=_6.results;if(_6.isStructured&&(!_5||_5.status<0||(_5.status==null&&_6.status<0)))
{if(!isc.RPC.runDefaultErrorHandling(_6,_8,_4.errorFormatter)){_1.setTaskOutput(_4.getClassName(),_4.ID,_4.createFailureOutput(_6));_4.fail(_1);return}}else{_1.setTaskOutput(_4.getClassName(),_4.ID,_6.data)}
_1.start()},_3);return false},isc.A.fail=function isc_FormSaveDataTask_fail(_1){if(!this.failureElement){this.logWarn("FormSaveDataTask does not have a failureElement. Process is aborting.")}
_1.setNextElement(this.failureElement)},isc.A.errorFormatter=function isc_FormSaveDataTask_errorFormatter(_1,_2,_3){if(_1=="VALIDATION_ERROR"){var _4=_2.errors,_5=["Server returned validation errors:<BR><UL>"];if(!isc.isAn.Array(_4))_4=[_4];for(var i=0;i<_4.length;i++){var _7=_4[i];for(var _8 in _7){var _9=_7[_8];_5.add("<LI><B>"+_8+":</B> ");if(!isc.isAn.Array(_9))_9=[_9];for(var j=0;j<_9.length;j++){var _11=_9[j];_5.add((j>0?"<BR>":"")+(isc.isAn.Object(_11)?_11.errorMessage:_11))}
_5.add("</LI>")}}
_5.add("</UL>");return _5.join("")}
return null},isc.A.createFailureOutput=function isc_FormSaveDataTask_createFailureOutput(_1){var _2={valuesValid:true};if(_1.status==isc.RPCResponse.STATUS_VALIDATION_ERROR){_2.valuesValid=false;var _3=this.getTargetComponent(this.process);if(_3){_2.errors=isc.DS.getSimpleErrors(_1)}}
return _2},isc.A.getOutputSchema=function isc_FormSaveDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;return _1.getDataSource()},isc.A.getFailureSchema=function isc_FormSaveDataTask_getFailureSchema(){if(!this.$214z){var _1=this.getTargetComponent(this.process);if(_1){var _2=[{name:"$214y",title:"[meta] valuesValid",type:"boolean",criteriaPath:"valuesValid"}];var _3=_1.getDataSource();if(_3){var _4=_3.getFieldNames();for(var i=0;i<_4.length;i++){var _6=_4[i],_7={name:_6,type:"text",multiple:true};_2.add(_7)}}
this.$214z=isc.DS.create({addGlobalId:false,clientOnly:true,criteriaBasePath:"errors",fields:_2})}}
return this.$214z},isc.A.destroy=function isc_FormSaveDataTask_destroy(){if(this.$214z)this.$214z.destroy();this.Super("destroy",arguments)},isc.A.getElementDescription=function isc_FormSaveDataTask_getElementDescription(){return"Save '"+this.componentId+"' data"});isc.B._maxIndex=isc.C+8;isc.defineClass("FormEditNewRecordTask","ComponentTask");isc.A=isc.FormEditNewRecordTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1973=["record"];isc.B.push(isc.A.createInitPropertiesFromAction=function isc_c_FormEditNewRecordTask_createInitPropertiesFromAction(_1,_2){var _3={},_4=_1.mapping||[];for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6=="null")_6=null;if(_6!=null)_3[this.$1973[i]]="^"+_6}
return _3});isc.B._maxIndex=isc.C+1;isc.A=isc.FormEditNewRecordTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.classDescription="Start editing a new record";isc.A.editorType="FormEditNewRecordTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormEditNewRecordTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3;if(this.initialValues){_3=this.$1950(this.initialValues,null,null,_1)}
_2.editNewRecord(_3);return true},isc.A.getElementDescription=function isc_FormEditNewRecordTask_getElementDescription(){return"Edit '"+this.componentId+"' new record"},isc.A.updateLastElementBindingReferences=function isc_FormEditNewRecordTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214v(this.initialValues,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_FormEditNewRecordTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2117(this.initialValues,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("FormEditRecordTask","FormEditNewRecordTask");isc.A=isc.FormEditRecordTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1973=["recordSourceComponent"];isc.B.push(isc.A.createInitPropertiesFromAction=function isc_c_FormEditRecordTask_createInitPropertiesFromAction(_1,_2){var _3={},_4=_1.mapping||[];for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6=="null")_6=null;if(_6!=null)_3[this.$1973[i]]="^"+_6}
return _3});isc.B._maxIndex=isc.C+1;isc.A=isc.FormEditRecordTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.editorType="FormEditRecordTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormEditRecordTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.recordSourceComponent;if(!_3){this.logWarn("recordSourceComponent not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("recordSourceComponent '"+_3+"' not found. Task skipped.");return true}
var _5=this.initialValues;if(isc.isA.ListGrid(_4)&&_4.anySelected()){_5=_4.getSelectedRecord()}else if(isc.isA.DynamicForm(_4)){_5=_4.getValues()}else if(isc.isA.ListGrid(_4)){_5=_4.getRecord(0)}else if(isc.isA.DetailViewer(_4)){_5=_4.data[0]}
_2.editRecord(_5);return true},isc.A.getElementDescription=function isc_FormEditRecordTask_getElementDescription(){return"Edit '"+this.componentId+"' from other record"},isc.A.updateGlobalIDReferences=function isc_FormEditRecordTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.recordSourceComponent&&this.recordSourceComponent==_1){this.recordSourceComponent=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+3;isc.defineClass("FormEditSelectedTask","ComponentTask");isc.A=isc.FormEditSelectedTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1973=["selectionComponentId"];isc.B.push(isc.A.createInitPropertiesFromAction=function isc_c_FormEditSelectedTask_createInitPropertiesFromAction(_1,_2){var _3={},_4=_1.mapping||[];for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6=="null")_6=null;if(_6!=null)_3[this.$1973[i]]="^"+_6}
return _3});isc.B._maxIndex=isc.C+1;isc.A=isc.FormEditSelectedTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["DynamicForm","ValuesManager"];isc.A.componentRequiresDataSource=true;isc.A.title="Edit Selected Record";isc.A.classDescription="Edit a record currently showing in some other component";isc.A.editorType="FormEditSelectedTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormEditSelectedTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.selectionComponentId;if(!_3){this.logWarn("selectionComponentId not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("selectionComponent '"+_3+"' not found. Task skipped.");return true}
var _5=null;if(_4.getSelectedRecord){_5=_4.getSelectedRecord()}
_2.editRecord(_5);return true},isc.A.getElementDescription=function isc_FormEditSelectedTask_getElementDescription(){return"Edit '"+this.componentId+"' from selected record"},isc.A.updateGlobalIDReferences=function isc_FormEditSelectedTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.selectionComponentId&&this.selectionComponentId==_1){this.selectionComponentId=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+3;isc.defineClass("FormHideFieldTask","ComponentTask");isc.A=isc.FormHideFieldTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="DynamicForm";isc.A.title="Show / Hide Field";isc.A.classDescription="Show or hide a field of a form";isc.A.editorType="FormHideFieldTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormHideFieldTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.targetField;if(!_3){this.logWarn("targetField not specified on task. Task skipped.");return true}
var _4=this.hide;if(isc.isA.String(_4))_4=(_4=="true");if(_4)_2.hideItem(_3);else _2.showItem(_3);return true},isc.A.getElementDescription=function isc_FormHideFieldTask_getElementDescription(){var _1=this.hide;if(isc.isA.String(_1))_1=(_1=="true");var _2=(_1?"Hide":"Show");return _2+" '"+this.componentId+"."+this.targetField+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("FormDisableFieldTask","ComponentTask");isc.A=isc.FormDisableFieldTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="DynamicForm";isc.A.title="Enable / Disable Field";isc.A.classDescription="Enable or disable a field of a form";isc.A.editorType="FormDisableFieldTaskEditor";isc.B.push(isc.A.executeElement=function isc_FormDisableFieldTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.targetField;if(!_3){this.logWarn("targetField not specified on task. Task skipped.");return true}
var _4=this.disable;if(isc.isA.String(_4))_4=(_4=="true");var _5=_2.getField(_3);if(_5){_5.setDisabled(_4)}
return true},isc.A.getElementDescription=function isc_FormDisableFieldTask_getElementDescription(){var _1=this.disable;if(isc.isA.String(_1))_1=(_1=="true");var _2=(_1?"Disable":"Enable");return _2+" '"+this.componentId+"."+this.targetField+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridFetchDataTask","ComponentTask");isc.A=isc.GridFetchDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid","DetailViewer"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Cause a grid to fetch data matching specified criteria";isc.A.editorType="GridFetchDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridFetchDataTask_executeElement(_1){var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this,_4=this.$195y(this.criteria,_1.state,_1.state,_1);_2.fetchData(_4,function(_6){var _5=(_6.data&&_6.data.length>0?_6.data[0]:null);_1.setTaskOutput(_3.getClassName(),_3.ID,_5);_1.start()},this.requestProperties);return false},isc.A.getOutputSchema=function isc_GridFetchDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_GridFetchDataTask_getElementDescription(){var _1=this.criteria,_2="Fetch "+(!_1?"all ":"")+"data on '"+this.componentId+"'";if(_1){if(!isc.DS.isAdvancedCriteria(_1)){_1=isc.DS.convertCriteria(_1)}
var _3=isc.XORGateway.$87n(_1);var _4=isc.DataSource.create({addGlobalId:false,fields:_3});_2+=" where <ul>"+isc.DataSource.getAdvancedCriteriaDescription(_1,_4,null,{prefix:"<li>",suffix:"</li>"})+"</ul>";_4.destroy()}
return _2},isc.A.updateLastElementBindingReferences=function isc_GridFetchDataTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214w(this.criteria,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_GridFetchDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2118(this.criteria,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+5;isc.defineClass("GridFetchRelatedDataTask","ComponentTask");isc.A=isc.GridFetchRelatedDataTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1973=["record","schema","callback","requestParameters"];isc.B.push(isc.A.createInitPropertiesFromAction=function isc_c_GridFetchRelatedDataTask_createInitPropertiesFromAction(_1,_2){var _3={},_4=_1.mapping||[];for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6=="null")_6=null;if(_6!=null)_3[this.$1973[i]]="^"+_6}
return _3});isc.B._maxIndex=isc.C+1;isc.A=isc.GridFetchRelatedDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid","DetailViewer"];isc.A.componentRequiresDataSource=true;isc.A.classDescription="Cause a grid to fetch data related to a record in another grid";isc.A.editorType="GridFetchRelatedDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridFetchRelatedDataTask_executeElement(_1){var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.recordSourceComponent;if(!_3){this.logWarn("recordSourceComponent not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("recordSourceComponent '"+_3+"' not found. Task skipped.");return true}
var _5=this.dataSource||_4;var _6=null,_7=isc.isA.ListGrid(_4)||isc.isA.TileGrid(_4);if(_7&&_4.anySelected()){_6=_4.getSelectedRecord()}else if(isc.isA.DynamicForm(_4)){_6=_4.getValues()}else if(_7){_6=_4.getRecord(0)}else if(isc.isA.DetailViewer(_4)){_6=_4.data[0]}
if(!_6)return true;var _8=this;var _9=_2.fetchRelatedData(_6,_5,function(_11){var _10=(_11.data&&_11.data.length>0?_11.data[0]:null);_1.setTaskOutput(_8.getClassName(),_8.ID,_10);_1.start()},null,true);if(!_9){var _10=_2.getRecord(0);_1.setTaskOutput(_8.getClassName(),_8.ID,_10)}
return!_9},isc.A.getOutputSchema=function isc_GridFetchRelatedDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_GridFetchRelatedDataTask_getElementDescription(){return"Fetch '"+this.componentId+"' data from related record"},isc.A.updateGlobalIDReferences=function isc_GridFetchRelatedDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.recordSourceComponent&&this.recordSourceComponent==_1){this.recordSourceComponent=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridRemoveSelectedDataTask","ComponentTask");isc.A=isc.GridRemoveSelectedDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid"];isc.A.classDescription="Remove data that is selected in a grid";isc.A.editorType="GridRemoveSelectedDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridRemoveSelectedDataTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=isc.addProperties({},this.requestProperties,{willHandleError:true});var _4=this;_2.removeSelectedData(function(_5,_6,_7){if(_5&&_5.status<0){_4.fail(_1);return}
_1.start()},_3);return false},isc.A.getElementDescription=function isc_GridRemoveSelectedDataTask_getElementDescription(){return"Remove '"+this.componentId+"' selected records"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridStartEditingTask","ComponentTask");isc.A=isc.GridStartEditingTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="ListGrid";isc.A.classDescription="Start editing a new record";isc.A.editorType="GridStartEditingTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridStartEditingTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3;if(this.initialValues){_3=this.$1950(this.initialValues,null,null,_1)}
_2.startEditingNew(_3);return true},isc.A.getElementDescription=function isc_GridStartEditingTask_getElementDescription(){return"Edit '"+this.componentId+"' new record"},isc.A.updateLastElementBindingReferences=function isc_GridStartEditingTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214v(this.initialValues,_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_GridStartEditingTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2117(this.initialValues,_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridSetEditValueTask","ComponentTask");isc.A=isc.GridSetEditValueTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="ListGrid";isc.A.componentRequiresDataSource=true;isc.A.classDescription="Set a value in an editable grid as if the user had made the edit";isc.A.editorType="GridSetEditValueTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridSetEditValueTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.targetField;if(_3==null){this.logWarn("targetField not specified on task. Task skipped.");return true}
var _4=_2.getEditRow(),_5=_4;if(_5<0){var _6=_2.getSelectedRecord();if(_6){_5=_2.getRecordIndex(_6)}}
if(_5<0){if(_2.getRecord(0)!=null){_5=0}}
var _7=this.value;if(_7){var _8=this.$1950({value:_7},null,null,_1);_7=_8.value}
if(_5>=0){if(_5!=_4){_2.startEditing(_5,_3);_5=_2.getEditRow()}
if(_5>=0){_2.setEditValue(_5,_3,_7)}}else{var _9={};_9[this.targetField]=_7;_2.startEditingNew(_9)}
return true},isc.A.getElementDescription=function isc_GridSetEditValueTask_getElementDescription(){return"Set '"+this.componentId+"."+this.targetField+"' edit value"},isc.A.updateLastElementBindingReferences=function isc_GridSetEditValueTask_updateLastElementBindingReferences(_1){var _2=this.Super("updateLastElementBindingReferences",arguments);_2=this.$214u("value",_1)||_2;return _2},isc.A.updateGlobalIDReferences=function isc_GridSetEditValueTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);_3=this.$2116("value",_1,_2)||_3;return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridSaveAllEditsTask","ComponentTask");isc.A=isc.GridSaveAllEditsTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="ListGrid";isc.A.classDescription="Save all changes in a grid with auto-saving disabled";isc.A.editorType="GridSaveAllEditsTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridSaveAllEditsTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;_2.saveAllEdits(null,function(){_1.start()});return false},isc.A.getElementDescription=function isc_GridSaveAllEditsTask_getElementDescription(){return"Save all '"+this.componentId+"' edits"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridTransferDataTask","ComponentTask");isc.A=isc.GridTransferDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid"];isc.A.classDescription="Transfer selected records from one grid to another";isc.A.editorType="GridTransferDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridTransferDataTask_executeElement(_1){var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.sourceComponent;if(!_3){this.logWarn("sourceComponent not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("sourceComponent '"+_3+"' not found. Task skipped.");return true}
var _5=this;_2.transferSelectedData(_4,null,function(_7){var _6=(_7&&_7.length>0?_7[0]:null);_1.setTaskOutput(_5.getClassName(),_5.ID,_6);_1.start()});return false},isc.A.getOutputSchema=function isc_GridTransferDataTask_getOutputSchema(){var _1=this.getTargetComponent(this.process);if(!_1)return null;var _2=_1.dataSource;if(_2&&(_2.getClassName==null||_2.getClassName()!="DataSource")){_2=isc.DataSource.get(_2)}
return _2},isc.A.getElementDescription=function isc_GridTransferDataTask_getElementDescription(){return"Transfer selected data from '"+this.sourceComponent+"' to '"+this.componentId+"'"},isc.A.updateGlobalIDReferences=function isc_GridTransferDataTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.sourceComponent&&this.sourceComponent==_1){this.sourceComponent=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+4;isc.defineClass("GridExportDataTask","ComponentTask");isc.A=isc.GridExportDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid","DetailViewer"];isc.A.componentRequiresDataSource=true;isc.A.title="Export Data (Server)";isc.A.classDescription="Export data currently shown in a grid";isc.A.editorType="GridExportDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridExportDataTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;_2.exportData(this.requestProperties,function(){_1.start()});return false},isc.A.getElementDescription=function isc_GridExportDataTask_getElementDescription(){return"Export '"+this.componentId+"' data"});isc.B._maxIndex=isc.C+2;isc.defineClass("GridExportClientDataTask","ComponentTask");isc.A=isc.GridExportClientDataTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["ListGrid","TileGrid","DetailViewer"];isc.A.title="Export Data (Client)";isc.A.classDescription="Export data currently shown in a grid keeping all grid-specific formatting";isc.A.editorType="GridExportClientDataTaskEditor";isc.B.push(isc.A.executeElement=function isc_GridExportClientDataTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;_2.exportClientData(this.requestProperties,function(){_1.start()});return false},isc.A.getElementDescription=function isc_GridExportClientDataTask_getElementDescription(){return"Export '"+this.componentId+"' formatted data"});isc.B._maxIndex=isc.C+2;isc.defineClass("PrintCanvasTask","ComponentTask");isc.A=isc.PrintCanvasTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["Canvas"];isc.A.title="Print";isc.A.classDescription="Print canvas contents";isc.A.editorType="PrintCanvasTaskEditor";isc.B.push(isc.A.executeElement=function isc_PrintCanvasTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;isc.Canvas.showPrintPreview(_2,this.printProperties,this.printCanvasTask,function(){_1.start()});return false},isc.A.getElementDescription=function isc_PrintCanvasTask_getElementDescription(){return"Print '"+this.componentId+"'"});isc.B._maxIndex=isc.C+2;isc.defineClass("ShowNextToComponentTask","ComponentTask");isc.A=isc.ShowNextToComponentTask;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1973=["nextToComponentId","side","canOcclude","skipAnimation"];isc.B.push(isc.A.createInitPropertiesFromAction=function isc_c_ShowNextToComponentTask_createInitPropertiesFromAction(_1,_2){var _3={},_4=_1.mapping||[];for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6=="null")_6=null;if(_6!=null)_3[this.$1973[i]]="^"+_6}
return _3});isc.B._maxIndex=isc.C+1;isc.A=isc.ShowNextToComponentTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="Canvas";isc.A.title="Show Next To";isc.A.classDescription="Show a component next to some other component";isc.A.editorType="ShowNextToComponentTaskEditor";isc.B.push(isc.A.executeElement=function isc_ShowNextToComponentTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.nextToComponentId;if(!_3){this.logWarn("nextToComponentId not specified on task. Task skipped.");return true}
var _4=this.getLocalComponent(_1,_3);if(!_4){this.logWarn("nextToComponentId '"+_3+"' not found. Task skipped.");return true}
_2.showNextTo(_4,this.side,this.canOcclue,this.skipAnimation);return true},isc.A.getElementDescription=function isc_ShowNextToComponentTask_getElementDescription(){return"Show '"+this.componentId+"' next to '"+this.nextToComponentId+"'"},isc.A.updateGlobalIDReferences=function isc_ShowNextToComponentTask_updateGlobalIDReferences(_1,_2){var _3=this.Super("updateGlobalIDReferences",arguments);if(this.nextToComponentId&&this.nextToComponentId==_1){this.nextToComponentId=_2;_3=true}
return _3});isc.B._maxIndex=isc.C+3;isc.defineClass("SetSectionTitleTask","ComponentTask");isc.A=isc.SetSectionTitleTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="SectionStack";isc.A.classDescription="Sets the title of a section in a SectionStack";isc.A.editorType="SetSectionTitleTaskEditor";isc.B.push(isc.A.executeElement=function isc_SetSectionTitleTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.targetSectionName;if(!_3&&this.targetSectionTitle){var _4=_2.getSectionNames();for(var i=0;i<_4.length;i++){var _6=_2.getSectionHeader(_4[i]);if(_6&&_6.title==this.targetSectionTitle){_3=_4[i];break}}}
if(!_3){isc.logWarn("Target section not identified by targetSectionName or targetSectionTitle. Task skipped");return true}
var _7=this.getTextFormulaValue(this.textFormula,_1)||this.getDynamicValue(this.title,_1);_2.setSectionTitle(_3,_7);return true},isc.A.getElementDescription=function isc_SetSectionTitleTask_getElementDescription(){return"Set '"+this.componentId+"' section title"});isc.B._maxIndex=isc.C+2;isc.defineClass("NavigateListPaneTask","ComponentTask");isc.A=isc.NavigateListPaneTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass="TriplePane";isc.A.classDescription="Navigate to the List pane in a TriplePane, using the selection in the Navigation pane to refresh the list, if applicable";isc.A.editorType="NavigateListPaneTaskEditor";isc.B.push(isc.A.executeElement=function isc_NavigateListPaneTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.title;if(_3){var _4=this.$1950({value:_3},null,null,_1);_3=_4.value}
_2.navigateListPane(_3);return true},isc.A.getElementDescription=function isc_NavigateListPaneTask_getElementDescription(){return"Navigate '"+this.componentId+"' list pane"});isc.B._maxIndex=isc.C+2;isc.defineClass("NavigateDetailPaneTask","ComponentTask");isc.A=isc.NavigateDetailPaneTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.componentBaseClass=["SplitPane","TriplePane"];isc.A.classDescription="Navigate to the Detail pane in a SplitPane or TriplePane, using the selection in the Navigation pane (for SplitPane) or List Pane (for TriplePane)";isc.A.editorType="NavigateDetailPaneTaskEditor";isc.B.push(isc.A.executeElement=function isc_NavigateDetailPaneTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=this.getTargetComponent(_1);if(!_2)return true;var _3=this.title;if(_3){var _4=this.$1950({value:_3},null,null,_1);_3=_4.value}
_2.navigateDetailPane(_3);return true},isc.A.getElementDescription=function isc_NavigateDetailPaneTask_getElementDescription(){return"Navigate '"+this.componentId+"' detail pane"});isc.B._maxIndex=isc.C+2;isc.defineClass("LogOutTask","ProcessElement");isc.A=isc.LogOutTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Logs the current user out of the application";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_LogOutTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=(isc.Auth?isc.Auth.logOutURL:null);if(!_2){isc.logWarn("logOutURL not specified on Auth class. Task skipped");return true}
isc.Auth.logOut();return true},isc.A.getElementDescription=function isc_LogOutTask_getElementDescription(){return"Log out the current user"});isc.B._maxIndex=isc.C+2;isc.defineClass("ResetPasswordTask","ProcessElement");isc.A=isc.ResetPasswordTask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.classDescription="Sends the user to a screen to reset their password";isc.A.editorType=null;isc.B.push(isc.A.executeElement=function isc_ResetPasswordTask_executeElement(_1){_1.setTaskOutput(this.getClassName(),this.ID,_1.getLastTaskOutput());var _2=(isc.Auth?isc.Auth.resetPasswordURL:null);if(!_2){isc.logWarn("resetPasswordURL not specified on Auth class. Task skipped");return true}
isc.Auth.resetPassword();return true},isc.A.getElementDescription=function isc_ResetPasswordTask_getElementDescription(){return"Reset user password"});isc.B._maxIndex=isc.C+2;isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Workflow');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Workflow_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Workflow module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;if(isc.Page)isc.Page.handleEvent(null,"moduleLoaded",{moduleName:'Workflow',loadTime:(isc._moduleEnd-isc._moduleStart)});}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Workflow'.");}
